<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tic Tac Toe!</title>
  
  <link rel="stylesheet" type="text/css" href="normalize.css">
  <link rel="stylesheet" type="text/css" href="style.css">

  <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <script src="http://use.edgefonts.net/days-one.js"></script>
  <script src="throttle.js"></script>  
  <script src="pattern.js"></script>
  
  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
<script>
function swapTurn(turn) {
  if (turn === 'X') {
    return 'O';
  } else {
    return 'X';
  }
}

function stripeItUp() {
  $("body").append("<canvas id='bgCanvas'></canvas>");
  var bgCanvas = document.getElementById('bgCanvas');
  patternInit();  
}

function adjustBoard() {
  var gbWidth = $("#gameboard").width();
  $("#gameboard").css('height', gbWidth+'px');

  var cellHeight = $(".gamecell").height(),
      fontSize = cellHeight * 0.85;

  $(".gamecell").css({
    "font-size"   : fontSize+"px",
    "line-height" : cellHeight+"px"
  });
}

function checkWin(row, col) {  
  
  if (                
    // Check for vertical win
    $("#cell1-" + col).html() == $("#cell2-" + col).html() && 
    $("#cell2-" + col).html() == $("#cell3-" + col).html() 
    ||
    // Check for horizontal win
    $("#cell"+ row + "-1").html() == $("#cell"+ row + "-2").html() && 
    $("#cell"+ row + "-2").html() == $("#cell"+ row + "-3").html() 
    ||
    // Check for diagonal wins
    $("#cell1-1").html() == $("#cell2-2").html() && 
    $("#cell2-2").html() == $("#cell3-3").html() && 
    $("#cell1-1").html().length > 0 
    ||
    $("#cell1-3").html() == $("#cell2-2").html() && 
    $("#cell2-2").html() == $("#cell3-1").html() &&
    $("#cell1-3").html().length > 0 
  ){
    return 'win';
  }

}

$(document).ready(function() {

  var playerTurn = 'X';

  // Load background stripes
  stripeItUp();

  // Adjust CSS for game board depending on window size
  adjustBoard();

  // Bind click event to game board cells.
  $(".gamecell").click(function() {
    if ( $(this).text().length === 0 ) {
      $(this).html("<span class='" + playerTurn + "'>" + playerTurn + "</span>");
      $(this).css("cursor","default");

      // Get row/column values
      var row = $(this).attr("id").substr(4,1),
          col = $(this).attr("id").substr(6,1);

      // Check for win
      gameState = checkWin(row, col);

      if ( gameState == 'win') {
        alert("Player " + playerTurn + " wins!!");
      }

      playerTurn = swapTurn(playerTurn);

    }
  });



});





</script>
</head>
<body>

<div id="cp">
  <h1 id="gametitle">TicTacToe</h1>
</div><div id="game">
  <div id="gameboard">
    <div><div id="cell1-1" class="gamecell"></div></div>
    <div><div id="cell1-2" class="gamecell"></div></div>
    <div><div id="cell1-3" class="gamecell"></div></div>

    <div><div id="cell2-1" class="gamecell"></div></div>
    <div><div id="cell2-2" class="gamecell"></div></div>
    <div><div id="cell2-3" class="gamecell"></div></div>

    <div><div id="cell3-1" class="gamecell"></div></div>
    <div><div id="cell3-2" class="gamecell"></div></div>
    <div><div id="cell3-3" class="gamecell"></div></div>
  </div>
</div>
</body>
</html>